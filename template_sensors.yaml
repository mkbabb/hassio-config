- sensor:
    - name: "Plant Schedule Duration"
      unit_of_measurement: "hours"
      state: >
          {% set start = strptime(states('input_datetime.plant_schedule_start'), '%H:%M:%S').time() %}
          {% set end = strptime(states('input_datetime.plant_schedule_end'), '%H:%M:%S').time() %}
          
          {% set start_dt = datetime.combine(date.today(), start) %}
          {% set end_dt = datetime.combine(date.today(), end) %}
          
          {% if end < start %}
            {% set end_dt = datetime.combine(date.today() + timedelta(days=1), end) %}
          {% endif %}

          {% set duration = (end_dt - start_dt).total_seconds() / 3600 %}
          
          {{ duration | round(2) }}
      - name: "Wakeup Time"
        state: >
            {% set weekday = now().weekday() %} {% if weekday < 5 %}
              {{ states('input_datetime.weekday_wakeup') }}
            {% else %}
              {{ states('input_datetime.weekend_wakeup') }}
            {% endif %}
        attributes:
            friendly_name: "Dynamic Wakeup Time"
            icon: mdi:alarm
